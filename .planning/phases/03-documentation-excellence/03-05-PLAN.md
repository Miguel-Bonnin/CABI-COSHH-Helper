---
phase: 03-documentation-excellence
plan: 05
type: execute
depends_on: []
files_modified: [js/modules/riskCalculations.js, js/modules/domHelpers.js, js/inventory-manager.js, js/eh40-loader.js, js/floor-plan-viewer.js]
---

<objective>
Add JSDoc comments to key exported functions in module files, improving inline documentation for developers using IDE intellisense and code navigation.

Purpose: Provide function-level documentation where it's most useful - directly in the code where developers read and use it.
Output: JSDoc comments on exported functions in 5 key modules.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONVENTIONS.md
@js/modules/riskCalculations.js
@js/modules/domHelpers.js
@js/inventory-manager.js
@js/eh40-loader.js
@js/floor-plan-viewer.js

**From conventions:**
- JSDoc not consistently used currently
- No @param, @returns, @throws tags in existing code
- Function names are descriptive (calculateOverallSeverity, safeGetElementById)

**Target modules for JSDoc:**
1. js/modules/riskCalculations.js - 2 exported functions
2. js/modules/domHelpers.js - 5 exported functions
3. js/inventory-manager.js - exported functions
4. js/eh40-loader.js - exported functions
5. js/floor-plan-viewer.js - exported functions

**JSDoc style to use:**
- Brief description (one line if possible)
- @param {type} name - description
- @returns {type} description
- @throws {ErrorType} description (if applicable)
- @example if complex logic
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add JSDoc to calculation and helper modules</name>
  <files>js/modules/riskCalculations.js, js/modules/domHelpers.js</files>
  <action>Add JSDoc comments above each exported function in riskCalculations.js (calculateOverallSeverity, calculateOverallLikelihood) and domHelpers.js (all 5 functions). For riskCalculations: Include @param tags for each parameter with type (array, string, number, etc.), @returns tag with return type and description, @throws tags for TypeError and RangeError validation errors, brief description of calculation logic. For domHelpers: Include @param tags (especially warnIfMissing boolean), @returns tags (null or element for queries, boolean for mutations), description of [DOM] warning behavior. Keep descriptions concise but informative - explain WHAT the function does and WHY you'd use it, not HOW it works internally (code shows that). Follow standard JSDoc format that works with VS Code intellisense.</action>
  <verify>Each exported function has JSDoc comment with description, @param, @returns, and @throws (where applicable)</verify>
  <done>JSDoc comments added to 7 functions across 2 core modules</done>
</task>

<task type="auto">
  <name>Task 2: Add JSDoc to feature modules</name>
  <files>js/inventory-manager.js, js/eh40-loader.js, js/floor-plan-viewer.js</files>
  <action>Add JSDoc comments above key exported functions in the 3 feature modules. For inventory-manager.js: Document updateInventoryStats, renderInventoryTable, createAssessmentFromInventory functions. For eh40-loader.js: Document loadEH40Data, autoFillWELValues functions. For floor-plan-viewer.js: Document initFloorPlan, setupZoomControls, searchRoomOnPlan functions. Use same JSDoc style: brief description, @param tags with types, @returns tags. For functions that manipulate DOM, note side effects in description (e.g., "Updates the inventory stats display in the DOM"). Don't add JSDoc to internal helper functions (non-exported) - focus on public API. Keep practical - this aids IDE users, not comprehensive API docs.</action>
  <verify>Key exported functions in all 3 modules have JSDoc comments</verify>
  <done>JSDoc comments added to ~8-10 key functions across 3 feature modules</done>
</task>

<task type="auto">
  <name>Task 3: Add module-level documentation</name>
  <files>js/modules/riskCalculations.js, js/modules/domHelpers.js, js/inventory-manager.js, js/eh40-loader.js, js/floor-plan-viewer.js</files>
  <action>Add file-level JSDoc comment at the top of each module (after any imports, before first function). Use @fileoverview or @file tag with brief description of module purpose. For riskCalculations: "Risk assessment calculation functions extracted for testability and reuse". For domHelpers: "Safe DOM query and manipulation helpers that prevent null reference errors". For inventory-manager: "Chemical inventory table rendering and filtering functionality". For eh40-loader: "UK HSE Workplace Exposure Limits (EH40) data loading and auto-fill". For floor-plan-viewer: "Interactive floor plan visualization with zoom and room search". Include @module tag with module name. Keep these brief - 1-2 sentences maximum.</action>
  <verify>All 5 modules have file-level JSDoc comment at top</verify>
  <done>Module-level documentation added to all 5 files</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All exported functions in target modules have JSDoc comments
- [ ] JSDoc includes @param, @returns, and @throws where applicable
- [ ] File-level documentation added to all 5 modules
- [ ] JSDoc format follows standard conventions (works with VS Code)
- [ ] Descriptions are concise and helpful (not obvious restating of function name)
- [ ] No internal/private functions documented (keep focused on exported API)
- [ ] All files still pass linting/tests after adding comments
</verification>

<success_criteria>

- JSDoc comments added to ~15-17 exported functions across 5 modules
- Each function documented with description, parameters, and return values
- Module-level documentation provides overview of each file's purpose
- Documentation follows standard JSDoc format compatible with IDE intellisense
- Comments are concise and practical, not overly verbose
</success_criteria>

<output>
After completion, create `.planning/phases/03-documentation-excellence/03-05-SUMMARY.md`:

# Phase 3 Plan 5: Inline Code Documentation Summary

**JSDoc comments added to key functions for IDE intellisense and code navigation**

## Accomplishments

- Added JSDoc comments to 7 functions in core modules (riskCalculations, domHelpers)
- Documented ~8-10 key functions in feature modules (inventory, eh40, floor-plan)
- Added module-level @fileoverview comments to all 5 target modules
- Followed standard JSDoc format compatible with VS Code intellisense
- Focused on exported API functions, not internal helpers

## Files Created/Modified

- `js/modules/riskCalculations.js` - Added JSDoc (2 functions + file-level)
- `js/modules/domHelpers.js` - Added JSDoc (5 functions + file-level)
- `js/inventory-manager.js` - Added JSDoc (~3 functions + file-level)
- `js/eh40-loader.js` - Added JSDoc (~2 functions + file-level)
- `js/floor-plan-viewer.js` - Added JSDoc (~3 functions + file-level)

## Decisions Made

**Documentation Scope:**
- Focused on exported/public functions only (not internal helpers)
- Added file-level overview to provide module context
- Used standard JSDoc tags compatible with IDE tooling

**Comment Style:**
- Kept descriptions concise (1-2 sentences maximum)
- Included @throws for validation errors in calculation functions
- Noted DOM side effects in feature module descriptions

## Issues Encountered

[Document any problems and resolutions, or "None"]

## Next Phase Readiness

**Phase 3 Complete: Documentation Excellence ✓**

Ready for Phase 4: Code Quality

**Documentation Infrastructure Now In Place:**
- ✅ CONTRIBUTING.md guides new contributors (03-01)
- ✅ ARCHITECTURE.md explains system design (03-02)
- ✅ README.md enhanced with dev setup and progress (03-03)
- ✅ TECHNICAL.md updated with Phase 1-2 modules (03-04)
- ✅ Inline JSDoc improves code-level documentation (03-05)
</output>
